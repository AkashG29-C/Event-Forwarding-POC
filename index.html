<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Adobe WebSDK Event POC</title>
  <script src="https://assets.adobedtm.com/e72b4113c11a/dea835227b36/launch-5cc6da518e0d-development.min.js" async></script>
  <script>
    // Initialize Alloy
    alloy("configure", {
      edgeConfigId: "993a5934-4f41-4827-a059-00508caf6325", // 
      orgId: "0CEB60F754C7E06B0A4C98A2@AdobeOrg", // 
      debugEnabled: true
    });

    // Send Page View event on load
    window.addEventListener("load", function () {
      alloy("sendEvent", {
        xdm: {
          eventType: "pageView",
          web: {
            webPageDetails: {
              URL: window.location.href
            },
            webInteraction: {
              type: "view"
            }
          },
          device: {
            type: /Mobi|Android/i.test(navigator.userAgent) ? "mobile" : "desktop"
          }
        }
      });
    });
  </script>
</head>

<body style="font-family:sans-serif;padding:20px;">
  <h2>WebSDK Form Demo</h2>

  <div style="margin-bottom:10px;">
    <label>Enter your Name:</label>
    <input type="text" id="nameInput" />
    <button class="nameSubmitBtn" type="button" onclick="submitName()">Submit Name</button>
  </div>

  <div style="margin-bottom:10px;">
    <label>Enter your Age:</label>
    <input type="number" id="ageInput" />
    <button class="ageSubmitBtn" type="button" onclick="submitAge()">Submit Age</button>
  </div>

  <div style="margin-bottom:10px;">
    <label>Enter your Email:</label>
    <input type="email" id="emailInput" />
    <button class="emailSubmitBtn" type="button" onclick="submitEmail()">Submit Email</button>
  </div>
  
  <script>
    function submitName() {
      const nameValue = document.getElementById("nameInput").value;

      console.log("Submitting name:", nameValue);

      alloy("sendEvent", {
        xdm: {
          eventType: "nameSubmit",
          web: {
            webInteraction: {
              name: nameValue,
              type: "other"
            },
            webPageDetails: {
              URL: window.location.href
            }
          },
          device: {
            type: /Mobi|Android/i.test(navigator.userAgent) ? "mobile" : "desktop"
          }
        }
      });
    }

    function submitAge() {
      const ageValue = document.getElementById("ageInput").value;

      console.log("Submitting age:", ageValue);

      alloy("sendEvent", {
        xdm: {
          eventType: "ageSubmit",
          person: {
            age: parseInt(ageValue)
          },
          web: {
            webInteraction: {
              type: "other"
            },
            webPageDetails: {
              URL: window.location.href
            }
          },
          device: {
            type: /Mobi|Android/i.test(navigator.userAgent) ? "mobile" : "desktop"
          }
        }
      });
    }

    // Submit Email
    function submitEmail() {
      const emailValue = document.getElementById("emailInput").value;

      alloy("sendEvent", {
        xdm: {
          eventType: "emailSubmit",
          identityMap: {
            email: [{
              id: emailValue,
              authenticatedState: "loggedIn",
              primary: true
            }]
          },
          web: {
            webInteraction: {
              type: "other"
            },
            webPageDetails: {
              URL: window.location.href
            }
          },
          device: {
            type: /Mobi|Android/i.test(navigator.userAgent) ? "mobile" : "desktop"
          }
        }
      });
    }
  </script>
</body>
</html>
